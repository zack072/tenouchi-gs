<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>テノウチ 音のトレーニングアプリ</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="https://kit.fontawesome.com/d46b7e36ae.js" crossorigin="anonymous"></script>
    <script type="text/javascript" src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
</head>

<body>
    <header id="header">
        <h1 class="tenouchi-title">テノウチ</h1>
        <nav id="nav">
            <ul>
                <li><a href="#tenouchi">使命</a></li>
                <li><a href="#tenouchi2">想い</a></li>
                <li><a href="#tenouchi3">挑戦</a></li>
                <li><a href="#contact">お問合せ</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <section id="tenouchi" class="aiueo">
            <h2 class="section1-title">
                <span class="ai">使命</span>
                <span class="ue">テノウチとは</span>
            </h2>

            <dl class="list">
                <p>「自分だけが持っている重要な技術や大切な情報」のことを言います。</p>
                <p>武道の本質となる門外不出の自分が持っているテノウチを明らかにすることで</p>
                <p>「出来ないことが出来る面白さ」「人間（自分）ってすごい。面白い。」を</p>
                <p>体感して自分の可能性にワクワクできる人を増やしたいと思っています。</p>
                <p>達人は「何が」違うのか？</p>
                <p>「もっと氣をだして丹田！肚を使って！」では伝わらない！</p>
                <p>様々なトレーニングがある中で感覚的な部分は上手に活用出来ているのかが</p>
                <p>不明点でした。テノウチでは、力を入れず・刃筋を合わせる。正しい振りとして</p>
                <p>音を機械学習することで個人の心と体の状態を</p>
                <p>チェックし最高の状態を引き出すことが可能になります。</p>
                <p>「平常心を保ち、イメージ通り体が動く」</p>
                <p>論理的な動き、姿勢も重要ですがスポーツにおいて「感覚」は</p>
                <p>よりよいパフォーマンスをする為に必須の項目だと考えています。</p>
                <p>しかし、達人の「感覚」を知り習得することはとても難しいのが現状です。</p>
                <p>武道やスポーツにＡＩというテクノロジーを掛け合わせることで</p>
                <p>テノウチを明らかにし掴みづらい感覚をノウハウ化して</p>
                <p>天才・達人・超一流の選手が持っている「感覚」を誰もが身につけられる世界を</p>
                <p>「テノウチ」は目指しています。</p>
            </dl>
        </section>

        <section id="tenouchi2" class="tenouchi2 aiueo">
            <h2 class="section2-title">
                <span class="ai">想い</span>
            </h2>
            <div class="img">
                <img src="img/couple-g916f0341d_1280.jpg" alt="">
                <p class="text">達人と呼ばれる人達のノウハウを途切れさせることなく
                    <br class="text">世に広め誰もがその感覚を身につけて
                    <br class="text">自分の可能性にワクワクできる世界へ
                    <br class="text">100年・200年後の後世に残し続け、未来へと繋いでいく
                </p>
            </div>
        </section>

        <section id="tenouchi3" class="tenouchi2 aiueo">
            <h2 class="section3-title">
                <span class="ai">科学との融合</span>
            </h2>
            <div class="img">
                <img src="img/ramon-salinero-vEE00Hx5d0Q-unsplash.jpg" alt="">
                <p class="text">西洋のスポーツ科学の考え方が広まり、トレーニング方法として活用されなくなってしまった武道。
                    <br class="text">
                    武道は非科学なのではなく
                    <br class="text">「まだ科学的に明らかになっていない技術」であり、
                    <br class="text">今もまだスポーツに活かせる要素が多く存在します。
                    <br class="text">捉えずらい感覚をデータ分析し、武道の秘伝と
                    <br class="text">言われるノウハウをAIが自動判定。
                    <br class="text">武道の達人の直接指導を受けなくても、
                    <br class="text">一人でスポーツに活かす武道の練習を行うことができます。
                </p>
            </div>
        </section>

        <div id="contact" class="Contact_btn">
            <button>
                <h2 id="btn1" class="Contact_btn">お問合せ</h2>
            </button>
            <p></p>
        </div>
        <!-- <button id="btn1" class="Contact_btn">Contact</button> -->
        <div id="controlArea">
            <section id="contact" class="contact">
                <div class="form-third">
                    <h2 class="nakama">仲間募集</h2>
                    <div class="class_box">
                        <p class="contact__text">お問い合わせ お気軽にどうぞ、お待ちしております．</p>
                    </div>
                    <dl class="form-inner">
                        <dt class="form-title">名前</dt>
                        <dd class="form-item"><input type="text" name="name" id="name" class="form-parts"></dd>
                        <dt class="form-title">メール</dt>
                        <dd class="form-item"><input type="mail" name="mail" id="mail" class="form-parts"></dd>
                        <dt class="form-title">詳細</dt>
                        <dd class="form-item">
                            <textarea name="detail" id="text" cols="30" rows="10" class="form-parts"></textarea>
                        </dd>
                    </dl>
                    <!-- <input type="submit" id="send" value="閉じる" class="btn"></h2> -->
                    <input type="button" id="btn2" value="閉じる" class="nakama"></h2>
                    <div class="Contact_btn">
                        <button>
                            <!-- <h3 type="button" id="btn2" class="nakama">送信</h3> -->
                            <h3 type="submit" id="send" class="btn">送信</h3>
                        </button>
                    </div>
                </div>
        </div>
        </section>
        </div>

    </main>
    <footer class="footer">
        <div class="third">
            <a href="#" class="btn-pagetop"><span class="fa fa-angle-up icon-up"></span></a>
            <small class="copyrigthts">copyrights 2017-2022 samurai-tenouchi Fukuoka All RIghts Reserved.</small>
        </div>
    </footer>

    <script>
        $(function () {

            // 画面読込時に実行する。
            $("#controlArea").hide(); // 初期表示で隠しておく

            // 指定ボタンを押下すると処理を開始する
            $("#btn1").on("click", function () {
                $("#controlArea").slideDown(500); // showは表示、slidDownは上から降ってくる感じ
            });

            // 指定ボタンを押下すると処理を開始する
            $("#btn2").on("click", function () {
                $("#controlArea").slideUp(500); // hideは隠す、slidUpは上に上がって消える
            });
        });
    </script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script>
        //日時をいい感じの形式にする関数
        function convertFromFirestoreTimestampToDatetime(timestamp) {
            const _d = timestamp ? new Date(timestamp * 1000) : new Date();
            const Y = _d.getFullYear();
            const m = (_d.getMonth() + 1).toString().padStart(2, '0');
            const d = _d.getDate().toString().padStart(2, '0');
            const H = _d.getHours().toString().padStart(2, '0');
            const i = _d.getMinutes().toString().padStart(2, '0');
            const s = _d.getSeconds().toString().padStart(2, '0');
            return `${Y}/${m}/${d} ${H}:${i}:${s}`;
        }
    </script>

    <!-- 以下にfirebaseのコードを貼り付けよう -->
    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.6/firebase-app.js";
        // import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.6.6/firebase-analytics.js";
        // TODO: Add SDKs for Firebase products that you want to use
        // https://firebase.google.com/docs/web/setup#available-libraries
        import {
            getFirestore, collection, addDoc, serverTimestamp, query, orderBy, onSnapshot,
        } from "https://www.gstatic.com/firebasejs/9.6.6/firebase-firestore.js";
        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        const firebaseConfig = {
            apiKey: "AIzaSyDLKwzpk5h2_ni0VcCrqSuzlA9XS5kQVnw",
            authDomain: "tenouchi-48a42.firebaseapp.com",
            projectId: "tenouchi-48a42",
            storageBucket: "tenouchi-48a42.appspot.com",
            messagingSenderId: "660875936255",
            appId: "1:660875936255:web:37f9d62e39d216478467ca",
            measurementId: "G-ZMF2G4KSPJ"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        // const analytics = getAnalytics(app);
        const db = getFirestore(app);

        $('#send').on('click', function () {
            alert('OK')

            addDoc(collection(db, 'tenouchi'), {
                name: $('#name').val(),
                mail: $('#mail').val(),
                text: $('#text').val(),
                time: serverTimestamp(),
            });
            $('#name').val('');
            $('#mail').val('');
            $('#text').val('');
        });

        const q = query(collection(db, 'tenouchi'), orderBy('time', 'desc'));
        // ↓onSnapshotでcloud firestoreのデータ変更時に実行される！
        onSnapshot(q, (querySnapshot) => {
            // querySnapshot.docsにcloud firestoreのデータが配列形式で入る
            const dataArray = []; // 必要なデータだけが入った新しい配列を作成
            querySnapshot.docs.forEach(function (doc) {
                const data = {
                    id: doc.id,
                    data: doc.data(),
                }
                dataArray.push(data);
                console.log(dataArray);
            });


            const tagArray = []; // `dataArray`は前回出てきたオブジェクトの配列
            dataArray.forEach(function (data) {
                const datetime = convertFromFirestoreTimestampToDatetime(data.data.time.seconds);
                tagArray.push(`
        <li id=${data.id}>
        <p>${data.data.name}</p>
        <p>${data.data.mail}</p>
        <p>${data.data.text}</p>
        <p>${datetime}</p>
        </li>
        `)
            })
            $('#output').html(tagArray.join(''));
        });
    // const data = [{ ...}, { ...}, { ...}, ...];
    // // 配列の各要素に対して下記の処理でデータが取れる．
    // const id = { ...}.id;
    // const data = { ...}.data();
    // // 「必要なデータだけを入れた新しい配列」を作成
    // const dataArray = [];
    // dataArray.push({ id: id, data: data }); //
    </script>
</body>

</html>